---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "kind_cluster Resource - kind"
subcategory: ""
description: |-
  Manages a KinD (Kubernetes in Docker) cluster.
---

# kind_cluster (Resource)

Manages a KinD (Kubernetes in Docker) cluster.

## Example Usage

```terraform
# Basic cluster with control-plane and worker
resource "kind_cluster" "basic" {
  name = "basic-cluster"

  node {
    role = "control-plane"
  }

  node {
    role = "worker"
  }
}

# Cluster with specific Kubernetes version
resource "kind_cluster" "versioned" {
  name       = "versioned-cluster"
  node_image = "kindest/node:v1.34.0"

  node {
    role = "control-plane"
  }

  node {
    role = "worker"
  }
}

# Cluster with custom networking
resource "kind_cluster" "custom_network" {
  name = "custom-network-cluster"

  networking {
    ip_family           = "ipv4"
    api_server_port     = 6443
    api_server_address  = "127.0.0.1"
    pod_subnet          = "10.244.0.0/16"
    service_subnet      = "10.96.0.0/12"
    disable_default_cni = false
    kube_proxy_mode     = "iptables"
  }

  node {
    role = "control-plane"
  }

  node {
    role = "worker"
  }
}

# Ingress-ready cluster with port mappings
resource "kind_cluster" "ingress" {
  name = "ingress-cluster"

  node {
    role = "control-plane"

    labels = {
      "ingress-ready" = "true"
    }

    kubeadm_config_patches = [
      <<-YAML
      kind: InitConfiguration
      nodeRegistration:
        kubeletExtraArgs:
          node-labels: "ingress-ready=true"
      YAML
    ]

    extra_port_mappings {
      container_port = 80
      host_port      = 8080
      protocol       = "TCP"
    }

    extra_port_mappings {
      container_port = 443
      host_port      = 8443
      protocol       = "TCP"
    }
  }

  node {
    role = "worker"
  }

  node {
    role = "worker"
  }
}

# Cluster with containerd registry configuration
resource "kind_cluster" "registry" {
  name = "registry-cluster"

  containerd_config_patches = [
    <<-TOML
    [plugins."io.containerd.grpc.v1.cri".registry]
      config_path = "/etc/containerd/certs.d"
    TOML
  ]

  node {
    role = "control-plane"
  }

  node {
    role = "worker"
  }
}

# HA cluster with multiple control planes
resource "kind_cluster" "ha" {
  name = "ha-cluster"

  node {
    role = "control-plane"
  }

  node {
    role = "control-plane"
  }

  node {
    role = "control-plane"
  }

  node {
    role = "worker"
  }

  node {
    role = "worker"
  }
}

# Cluster with feature gates and runtime config
resource "kind_cluster" "advanced" {
  name = "advanced-cluster"

  feature_gates = {
    "EphemeralContainers" = true
  }

  runtime_config = {
    "api/beta" = "true"
  }

  node {
    role = "control-plane"
  }

  node {
    role = "worker"
  }
}

# Cluster with volume mounts
resource "kind_cluster" "mounts" {
  name = "mounts-cluster"

  node {
    role = "control-plane"

    extra_mounts {
      host_path      = "/tmp/kind-data"
      container_path = "/data"
      read_only      = false
    }
  }

  node {
    role = "worker"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the cluster.

### Optional

- `containerd_config_patches` (List of String) Containerd config patches (TOML format) applied to all nodes.
- `containerd_config_patches_json6902` (List of String) Containerd config patches (RFC 6902 JSON patches) applied to all nodes.
- `feature_gates` (Map of Boolean) Kubernetes feature gates to enable/disable. Map of feature gate name to boolean.
- `kubeadm_config_patches` (List of String) Kubeadm config patches (RFC 7386 merge patches) applied to all nodes.
- `kubeadm_config_patches_json6902` (Block List) Kubeadm config patches (RFC 6902 JSON patches) applied to all nodes. (see [below for nested schema](#nestedblock--kubeadm_config_patches_json6902))
- `networking` (Block, Optional) Cluster networking configuration. (see [below for nested schema](#nestedblock--networking))
- `node` (Block List) Node configuration. If not specified, creates 1 control-plane and 1 worker. Changes trigger cluster recreation. (see [below for nested schema](#nestedblock--node))
- `node_image` (String) The node image to use for the cluster nodes. Applies to all nodes unless overridden per node.
- `runtime_config` (Map of String) Runtime configuration for kube-apiserver (--runtime-config flags). Used to enable alpha APIs.
- `wait_for_ready` (Number) Time in seconds to wait for the control plane to be ready. Default is 300 (5 minutes).

### Read-Only

- `client_certificate` (String, Sensitive) Base64 encoded client certificate for TLS authentication.
- `client_key` (String, Sensitive) Base64 encoded client key for TLS authentication.
- `cluster_ca_certificate` (String, Sensitive) Base64 encoded cluster CA certificate.
- `endpoint` (String) The Kubernetes API server endpoint.
- `id` (String) Cluster identifier (same as name).
- `kubeconfig` (String, Sensitive) The kubeconfig content for connecting to the cluster.
- `kubeconfig_path` (String) The path to the kubeconfig file.

<a id="nestedblock--kubeadm_config_patches_json6902"></a>
### Nested Schema for `kubeadm_config_patches_json6902`

Required:

- `group` (String) API group of the target resource.
- `kind` (String) Kind of the target resource.
- `patch` (String) JSON patch content (RFC 6902 format).
- `version` (String) API version of the target resource.


<a id="nestedblock--networking"></a>
### Nested Schema for `networking`

Optional:

- `api_server_address` (String) Address to bind the API server on the host. Defaults to 127.0.0.1.
- `api_server_port` (Number) Port for the API server on the host. 0 for random, -1 for backend selection.
- `disable_default_cni` (Boolean) Disable the default CNI (kindnet). Set to true to install a custom CNI.
- `dns_search` (List of String) DNS search domains for nodes.
- `ip_family` (String) IP family for the cluster: ipv4, ipv6, or dual.
- `kube_proxy_mode` (String) Kube-proxy mode: iptables, ipvs, or nftables.
- `pod_subnet` (String) CIDR for pod IPs. Example: 10.244.0.0/16.
- `service_subnet` (String) CIDR for service IPs. Example: 10.96.0.0/12.


<a id="nestedblock--node"></a>
### Nested Schema for `node`

Required:

- `role` (String) Node role: control-plane or worker.

Optional:

- `extra_mounts` (Block List) Additional volume mounts for the node. (see [below for nested schema](#nestedblock--node--extra_mounts))
- `extra_port_mappings` (Block List) Port mappings from host to container. (see [below for nested schema](#nestedblock--node--extra_port_mappings))
- `image` (String) Node image. Overrides cluster-level node_image.
- `kubeadm_config_patches` (List of String) Kubeadm config patches for this node (RFC 7386 merge patches).
- `kubeadm_config_patches_json6902` (Block List) Kubeadm config patches for this node (RFC 6902 JSON patches). (see [below for nested schema](#nestedblock--node--kubeadm_config_patches_json6902))
- `labels` (Map of String) Kubernetes labels for the node.

<a id="nestedblock--node--extra_mounts"></a>
### Nested Schema for `node.extra_mounts`

Required:

- `container_path` (String) Path in the container.
- `host_path` (String) Path on the host.

Optional:

- `propagation` (String) Mount propagation: None, HostToContainer, or Bidirectional.
- `read_only` (Boolean) Read-only mount.
- `selinux_relabel` (Boolean) Enable SELinux relabeling.


<a id="nestedblock--node--extra_port_mappings"></a>
### Nested Schema for `node.extra_port_mappings`

Required:

- `container_port` (Number) Port in the container.
- `host_port` (Number) Port on the host.

Optional:

- `listen_address` (String) Host bind address. Defaults to 127.0.0.1.
- `protocol` (String) Protocol: TCP, UDP, or SCTP.


<a id="nestedblock--node--kubeadm_config_patches_json6902"></a>
### Nested Schema for `node.kubeadm_config_patches_json6902`

Required:

- `group` (String) API group.
- `kind` (String) Resource kind.
- `patch` (String) JSON patch content.
- `version` (String) API version.
